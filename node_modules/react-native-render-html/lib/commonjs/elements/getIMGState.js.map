{"version":3,"sources":["getIMGState.ts"],"names":["getIMGState","error","alt","altColor","source","containerStyle","concreteDimensions","initialDimensions","objectFit","onError","type","dimensions","imageStyle"],"mappings":";;;;;;;AAQA;;;;AAiBO,SAASA,WAAT,CAAqB;AAC1BC,EAAAA,KAD0B;AAE1BC,EAAAA,GAF0B;AAG1BC,EAAAA,QAH0B;AAI1BC,EAAAA,MAJ0B;AAK1BC,EAAAA,cAL0B;AAM1BC,EAAAA,kBAN0B;AAO1BC,EAAAA,iBAP0B;AAQ1BC,EAAAA,SAR0B;AAS1BC,EAAAA;AAT0B,CAArB,EAUiC;AACtC,MAAIR,KAAJ,EAAW;AACT,WAAO;AACLS,MAAAA,IAAI,EAAE,OADD;AAELR,MAAAA,GAFK;AAGLC,MAAAA,QAHK;AAILC,MAAAA,MAJK;AAKLH,MAAAA,KALK;AAMLI,MAAAA,cANK;AAOLM,MAAAA,UAAU,EAAEL,kBAAF,aAAEA,kBAAF,cAAEA,kBAAF,GAAwBC;AAP7B,KAAP;AASD;;AACD,MAAID,kBAAkB,IAAI,IAA1B,EAAgC;AAC9B,WAAO;AACLI,MAAAA,IAAI,EAAE,SADD;AAELR,MAAAA,GAFK;AAGLC,MAAAA,QAHK;AAILC,MAAAA,MAJK;AAKLK,MAAAA,OALK;AAMLJ,MAAAA,cANK;AAOLO,MAAAA,UAAU,EAAE,qCAAuBP,cAAvB,EAAuCG,SAAvC,CAPP;AAQLG,MAAAA,UAAU,EAAEL;AARP,KAAP;AAUD;;AACD,SAAO;AACLI,IAAAA,IAAI,EAAE,SADD;AAELR,IAAAA,GAFK;AAGLC,IAAAA,QAHK;AAILC,IAAAA,MAJK;AAKLC,IAAAA,cALK;AAMLM,IAAAA,UAAU,EAAEJ;AANP,GAAP;AAQD","sourcesContent":["import type {\n  UseIMGElementStateProps,\n  IMGElementState,\n  IMGElementStateBase,\n  IMGElementStateError,\n  IMGElementStateSuccess,\n  IMGElementStateLoading\n} from './img-types';\nimport extractImageStyleProps from './extractImageStyleProps';\nimport { ImageDimensions } from '../shared-types';\n\ninterface GetStateProps<C> extends Omit<IMGElementStateBase, 'dimensions'> {\n  concreteDimensions: C;\n  error: Error | null;\n  initialDimensions: ImageDimensions;\n  objectFit: UseIMGElementStateProps['objectFit'];\n  onError?: (e: Error) => void;\n}\n\nexport function getIMGState(\n  props: GetStateProps<ImageDimensions>\n): IMGElementStateError | IMGElementStateSuccess;\nexport function getIMGState(\n  props: GetStateProps<null | ImageDimensions>\n): IMGElementState;\nexport function getIMGState({\n  error,\n  alt,\n  altColor,\n  source,\n  containerStyle,\n  concreteDimensions,\n  initialDimensions,\n  objectFit,\n  onError\n}: GetStateProps<any>): IMGElementState {\n  if (error) {\n    return {\n      type: 'error',\n      alt,\n      altColor,\n      source,\n      error,\n      containerStyle,\n      dimensions: concreteDimensions ?? initialDimensions\n    };\n  }\n  if (concreteDimensions != null) {\n    return {\n      type: 'success',\n      alt,\n      altColor,\n      source,\n      onError,\n      containerStyle,\n      imageStyle: extractImageStyleProps(containerStyle, objectFit),\n      dimensions: concreteDimensions\n    } as IMGElementStateSuccess;\n  }\n  return {\n    type: 'loading',\n    alt,\n    altColor,\n    source,\n    containerStyle,\n    dimensions: initialDimensions\n  } as IMGElementStateLoading;\n}\n"]}