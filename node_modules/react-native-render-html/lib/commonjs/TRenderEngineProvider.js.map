{"version":3,"sources":["TRenderEngineProvider.tsx"],"names":["defaultTRenderEngine","TRenderEngineContext","React","createContext","tRenderEngineProviderPropTypes","customHTMLElementModels","PropTypes","object","isRequired","enableCSSInlineProcessing","bool","enableUserAgentStyles","idsStyles","ignoredDomTags","array","ignoreDomNode","func","domVisitors","ignoredStyles","allowedStyles","htmlParserOptions","tagsStyles","classesStyles","emSize","number","baseStyle","systemFonts","arrayOf","string","fallbackFonts","shape","serif","monospace","setMarkersForTNode","dangerouslyDisableHoisting","dangerouslyDisableWhitespaceCollapsing","selectDomRoot","defaultFallbackFonts","Platform","select","ios","default","defaultTRenderEngineProviderProps","decodeEntities","fontSize","defaultSystemFonts","useAmbientTRenderEngine","engine","useContext","__DEV__","console","error","TRenderEngineProvider","children","config","defaultProps","propTypes"],"mappings":";;;;;;;;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;AAEA,MAAMA,oBAAoB,GAAG,EAA7B;;AAEA,MAAMC,oBAAoB,gBACxBC,eAAMC,aAAN,CAAmCH,oBAAnC,CADF;;AAGO,MAAMI,8BAGZ,GAAG;AACFC,EAAAA,uBAAuB,EAAEC,mBAAUC,MAAV,CAAiBC,UADxC;AAEFC,EAAAA,yBAAyB,EAAEH,mBAAUI,IAFnC;AAGFC,EAAAA,qBAAqB,EAAEL,mBAAUI,IAH/B;AAIFE,EAAAA,SAAS,EAAEN,mBAAUC,MAJnB;AAKFM,EAAAA,cAAc,EAAEP,mBAAUQ,KALxB;AAMFC,EAAAA,aAAa,EAAET,mBAAUU,IANvB;AAOFC,EAAAA,WAAW,EAAEX,mBAAUC,MAPrB;AAQFW,EAAAA,aAAa,EAAEZ,mBAAUQ,KAAV,CAAgBN,UAR7B;AASFW,EAAAA,aAAa,EAAEb,mBAAUQ,KATvB;AAUFM,EAAAA,iBAAiB,EAAEd,mBAAUC,MAV3B;AAWFc,EAAAA,UAAU,EAAEf,mBAAUC,MAXpB;AAYFe,EAAAA,aAAa,EAAEhB,mBAAUC,MAZvB;AAaFgB,EAAAA,MAAM,EAAEjB,mBAAUkB,MAAV,CAAiBhB,UAbvB;AAcFiB,EAAAA,SAAS,EAAEnB,mBAAUC,MAdnB;AAeFmB,EAAAA,WAAW,EAAEpB,mBAAUqB,OAAV,CAAkBrB,mBAAUsB,MAA5B,CAfX;AAgBFC,EAAAA,aAAa,EAAEvB,mBAAUwB,KAAV,CAAgB;AAC7BC,IAAAA,KAAK,EAAEzB,mBAAUsB,MADY;AAE7B,kBAActB,mBAAUsB,MAFK;AAG7BI,IAAAA,SAAS,EAAE1B,mBAAUsB;AAHQ,GAAhB,CAhBb;AAqBFK,EAAAA,kBAAkB,EAAE3B,mBAAUU,IArB5B;AAsBFkB,EAAAA,0BAA0B,EAAE5B,mBAAUI,IAtBpC;AAuBFyB,EAAAA,sCAAsC,EAAE7B,mBAAUI,IAvBhD;AAwBF0B,EAAAA,aAAa,EAAE9B,mBAAUU;AAxBvB,CAHG;AA8BP;AACA;AACA;AACA;;;AACO,MAAMqB,oBAAoB,GAAG;AAClC,gBAAcC,sBAASC,MAAT,CAAgB;AAAEC,IAAAA,GAAG,EAAE,QAAP;AAAiBC,IAAAA,OAAO,EAAE;AAA1B,GAAhB,CADoB;AAElCT,EAAAA,SAAS,EAAEM,sBAASC,MAAT,CAAgB;AAAEC,IAAAA,GAAG,EAAE,OAAP;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAAhB,CAFuB;AAGlCV,EAAAA,KAAK,EAAEO,sBAASC,MAAT,CAAgB;AAAEC,IAAAA,GAAG,EAAE,iBAAP;AAA0BC,IAAAA,OAAO,EAAE;AAAnC,GAAhB;AAH2B,CAA7B;;AAMA,MAAMC,iCAAsD,GAAG;AACpEtB,EAAAA,iBAAiB,EAAE;AACjBuB,IAAAA,cAAc,EAAE;AADC,GADiD;AAIpEpB,EAAAA,MAAM,EAAE,EAJ4D;AAKpEV,EAAAA,cAAc,EAAE,EALoD;AAMpEK,EAAAA,aAAa,EAAE,EANqD;AAOpEO,EAAAA,SAAS,EAAE;AAAEmB,IAAAA,QAAQ,EAAE;AAAZ,GAPyD;AAQpEvB,EAAAA,UAAU,EAAE,EARwD;AASpEC,EAAAA,aAAa,EAAE,EATqD;AAUpEX,EAAAA,qBAAqB,EAAE,IAV6C;AAWpEF,EAAAA,yBAAyB,EAAE,IAXyC;AAYpEJ,EAAAA,uBAAuB,EAAE,EAZ2C;AAapEwB,EAAAA,aAAa,EAAEQ,oBAbqD;AAcpEX,EAAAA,WAAW,EAAEmB;AAduD,CAA/D;AAiBP;AACA;AACA;AACA;AACA;AACA;AACA;;;;AACO,SAASC,uBAAT,GAAmC;AACxC,QAAMC,MAAM,GAAG7C,eAAM8C,UAAN,CAAiB/C,oBAAjB,CAAf;;AACA,MACE,OAAOgD,OAAP,KAAmB,SAAnB,IACAA,OADA,IAEAF,MAAM,KAAK/C,oBAHb,EAIE;AACAkD,IAAAA,OAAO,CAACC,KAAR,CAAc,sDAAd;AACD;;AACD,SAAOJ,MAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACe,SAASK,qBAAT,CAA+B;AAC5CC,EAAAA,QAD4C;AAE5C,KAAGC;AAFyC,CAA/B,EAG0C;AACvD,QAAMP,MAAM,GAAG,+BAAiBO,MAAjB,CAAf;AACA,sBACE,6BAAC,oBAAD,CAAsB,QAAtB;AAA+B,IAAA,KAAK,EAAEP;AAAtC,KACGM,QADH,CADF;AAKD;AAED;AACA;AACA;;;AACAD,qBAAqB,CAACG,YAAtB,GAAqCb,iCAArC;AAEA;AACA;AACA;;AACAU,qBAAqB,CAACI,SAAtB,GAAkCpD,8BAAlC","sourcesContent":["import TRenderEngine from '@native-html/transient-render-engine';\nimport React, { PropsWithChildren, ReactElement } from 'react';\nimport { Platform } from 'react-native';\nimport PropTypes from 'prop-types';\nimport useTRenderEngine from './hooks/useTRenderEngine';\nimport { TRenderEngineConfig } from './shared-types';\nimport defaultSystemFonts from './defaultSystemFonts';\n\nconst defaultTRenderEngine = {} as any;\n\nconst TRenderEngineContext =\n  React.createContext<TRenderEngine>(defaultTRenderEngine);\n\nexport const tRenderEngineProviderPropTypes: Record<\n  keyof TRenderEngineConfig,\n  any\n> = {\n  customHTMLElementModels: PropTypes.object.isRequired,\n  enableCSSInlineProcessing: PropTypes.bool,\n  enableUserAgentStyles: PropTypes.bool,\n  idsStyles: PropTypes.object,\n  ignoredDomTags: PropTypes.array,\n  ignoreDomNode: PropTypes.func,\n  domVisitors: PropTypes.object,\n  ignoredStyles: PropTypes.array.isRequired,\n  allowedStyles: PropTypes.array,\n  htmlParserOptions: PropTypes.object,\n  tagsStyles: PropTypes.object,\n  classesStyles: PropTypes.object,\n  emSize: PropTypes.number.isRequired,\n  baseStyle: PropTypes.object,\n  systemFonts: PropTypes.arrayOf(PropTypes.string),\n  fallbackFonts: PropTypes.shape({\n    serif: PropTypes.string,\n    'sans-serif': PropTypes.string,\n    monospace: PropTypes.string\n  }),\n  setMarkersForTNode: PropTypes.func,\n  dangerouslyDisableHoisting: PropTypes.bool,\n  dangerouslyDisableWhitespaceCollapsing: PropTypes.bool,\n  selectDomRoot: PropTypes.func\n};\n\n/**\n * Default fallback font for special keys such as 'sans-serif', 'monospace',\n * 'serif', based on current platform.\n */\nexport const defaultFallbackFonts = {\n  'sans-serif': Platform.select({ ios: 'system', default: 'sans-serif' }),\n  monospace: Platform.select({ ios: 'Menlo', default: 'monospace' }),\n  serif: Platform.select({ ios: 'Times New Roman', default: 'serif' })\n};\n\nexport const defaultTRenderEngineProviderProps: TRenderEngineConfig = {\n  htmlParserOptions: {\n    decodeEntities: true\n  },\n  emSize: 14,\n  ignoredDomTags: [],\n  ignoredStyles: [],\n  baseStyle: { fontSize: 14 },\n  tagsStyles: {},\n  classesStyles: {},\n  enableUserAgentStyles: true,\n  enableCSSInlineProcessing: true,\n  customHTMLElementModels: {},\n  fallbackFonts: defaultFallbackFonts,\n  systemFonts: defaultSystemFonts\n};\n\n/**\n * Use the ambient transient render engine.\n *\n * @returns The ambient transient render engine.\n *\n * @public\n */\nexport function useAmbientTRenderEngine() {\n  const engine = React.useContext(TRenderEngineContext);\n  if (\n    typeof __DEV__ === 'boolean' &&\n    __DEV__ &&\n    engine === defaultTRenderEngine\n  ) {\n    console.error('TRenderEngineProvider is missing in the render tree.');\n  }\n  return engine;\n}\n\n/**\n * A react component to share a {@link TRenderEngine} instance across different\n * rendered contents via {@link RenderHTMLSource}. This can significantly enhance\n * performance in applications with potentially dozens or hundreds of distinct\n * rendered snippets such as chat apps.\n *\n * @param props - Pass engine config here.\n */\nexport default function TRenderEngineProvider({\n  children,\n  ...config\n}: PropsWithChildren<TRenderEngineConfig>): ReactElement {\n  const engine = useTRenderEngine(config);\n  return (\n    <TRenderEngineContext.Provider value={engine}>\n      {children}\n    </TRenderEngineContext.Provider>\n  );\n}\n\n/**\n * @ignore\n */\nTRenderEngineProvider.defaultProps = defaultTRenderEngineProviderProps;\n\n/**\n * @ignore\n */\nTRenderEngineProvider.propTypes = tRenderEngineProviderPropTypes;\n"]}